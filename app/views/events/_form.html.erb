<style>

#places li {
    display: block;
    padding: 0;
    margin: 0;
    list-style: none;
}
.js-enabled {
    position: absolute;
    left: 0;
    right: 0;
    top: 0;
    padding: 0;
    margin: 0;
    list-style: none;
    background-color: #ddd;
}
#places input,
.js-enabled input + label {
    display: none;
}
#places input:checked + label {
    background-color: #444;
    color: #fff;
}
#places.js-active input + label,
#places input.js-active + label {
    display: block;
    padding: 5px 10px;
    border-bottom: 1px solid #aaa;
}
#showPlaces {
    position: absolute;
    right: 0;
    margin-top: -30px;
}
</style>
<% if @event.errors.any? %>
    <ul>
    <% @event.errors.messages.each do |key, val| %>
        <%= content_tag(:li, "#{key}: #{val.join(', ')}") %>
    <% end %>
    </ul>
<% end %>
<%= form_for @event, html: { multipart: true, name: 'createForm', onsubmit: "return false;" } do |f| %>

    <div class="create-form__row">
        <%= f.label :title, class: 'create-form__label' %>
        <div class="create-form__inputs">
            <%= f.text_field :title, class: 'create-form__input' %>
        </div>
    </div>
    <div class="create-form__row">
        <%= f.label :picture, class: 'create-form__label' %>
        <div>
          <%= label_tag 'uploadFile', 'Upload file', id: 'uploadFileLabel', class: 'create-form__file' %>
          <%= f.file_field :picture, id: 'uploadFile' %>
          <div class="create-form__info">
              Only PNGs or JPEGs CHANGEME....
          </div>
        </div>
    </div>
    <div class="create-form__row">
        <%= f.label :short_description, class: 'create-form__label' %>
        <div class="create-form__inputs">
            <%= f.text_area :short_description, class: 'create-form__input' %>
        </div>
    </div>
    <div class="create-form__row">
        <%= f.label :categories, class: 'create-form__label' %>
        <div>
            <div id="selectList" class="create-form__select-list">
                <% Category.all.each do |c| %>
                    <%= f.check_box(:category_ids, {:multiple => true, :id => c.id}, c.id, false) %>
                    <%= label_tag c.id, c.danish %>
                <% end %>
            </div>
        </div>
    </div>
    <%= f.fields_for :location do |l| %>
      <div class="create-form__row">
        <%= f.label :location, class: 'create-form__label' %>
        <div>
            <input class="create-form__input" id="placeName" placeholder="Stednavn" autocomplete="off" />
            <input class="create-form__input" id="placeAddress" placeholder="Adresse" />
            <div style="position: relative">
                <div id="showPlaces">Se steder</div>
                <ul id="places">
                  <% Location.all.each do |location| %>
                      <li>
                          <input data-address="<%= location.full_address %>" type="radio" name="places" id="<%="place-#{location.id}" %>" name="selectList" value="<%= location.id %>" data-name="<%= location.name %>"/>
                          <%= content_tag(:label, location.name, for: "place-#{location.id}") %>
                      </li>
                  <% end %>
                </ul>
            </div>
        </div>
      </div>
      <div class="create-form__row">
        <%= f.label "Address", class: 'create-form__label' %>
        <div class="create-form__inputs">
          <%= l.text_field :street_address, class: 'create-form__input' %>
        </div>
      </div>
      <div class="create-form__row">
        <%= f.label "Zipcode/Town", class: 'create-form__label' %>
        <div class="create-form__inputs">
          <%= l.text_field :postcode, class: 'create-form__input__postcode' %>
          <%= l.text_field :town, class: 'create-form__input__town' %>
        </div>
      </div>
    <% end %>
    <div class="create-form__row">
        <%= label_tag '', 'Tidspunkt', class: 'create-form__label' %>
        <div>
            <div>
                <div id="timeInput" class="create-form__date">
                    <div>
                        <div>
                          <%= f.label :start_time, class: 'create-form__label' %>
                        </div>
                        <div>
                            <% round_time_start = "#{Time.now.hour}:00" %>
                            <%= time_field("start_time_hh_mm_ss", "", { value: round_time_start }) %>
                            <%= date_field("start_time_yyyy_mm_dd", "") %>
                        </div>
                    </div>
                    <div>
                        <div>
                          <%= f.label :end_time, class: 'create-form__label' %>
                        </div>
                        <div>
                            <% round_time_end = "#{Time.now.hour}:30" %>
                            <%= time_field("end_time_hh_mm_ss", "", { value: round_time_end }) %>
                            <%= date_field("end_time_yyyy_mm_dd", "") %>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="create-form__row">
        <%= f.label :link, class: 'create-form__label' %>
        <div>
            <%= f.url_field :link, class: 'create-form__input' %>
        </div>
    </div>
    <div class="create-form__row">
        <%= label_tag '', 'Price', class: 'create-form__label' %>
        <div>
          <%= check_box_tag :priceCheck %>
          <%= label_tag :priceCheck, 'Does it cost something? FIXME' %>
        </div>
        <div>
          <%= f.text_field :price, id: 'priceInput', class: 'create-form__input', style: 'display: none;' %>
        </div>
    </div>
    <div class="create-form__row">
        <%= f.label :comments_enabled, class: 'create-form__label' %>
        <div>
            <%= f.check_box_tag :comments_enabled %>
            <%= f.label :comments_enabled %>
        </div>
    </div>
    <div class="create-form__row">
        <%= f.label :published, class: 'create-form__label' %>
        <div>
            <%= f.check_box_tag :published %>
            <%= f.label :published %>
        </div>
    </div>
    <%= f.submit 'Create event', class: 'create-form__submit' %>

<% end %>
<%= render partial: 'form_js' %>
